# Summary

This file contains Clojure code that implements a Bible summarization app using OpenAI's GPT-3.5-turbo model. The app generates agents that are tasked with summarizing Biblical passages. The app also includes functions for summarizing Bible content, generating prompts for the agents, mutating agents, comparing summaries, and getting the next verse to summarize.

## Functions and Usage

### `parse-response-body`

This function takes a response from an HTTP request and parses the JSON response body into a Clojure map using `clojure.data.json`.

### `post-gpt`

This function sends a POST request to the OpenAI API to generate completions using the GPT-3.5-turbo model. It takes a query as input, constructs the request body and headers, and returns the response from the API.

### `p+`

This function takes an argument `x`, prints it to the console, and returns `x`. It can be used for debugging purposes.

### `query-gpt`

This function takes a query, calls `post-gpt` to generate completions, parses the response body, and extracts the content of the first choice from the response.

### `gen-agent-body`

This function generates a prompt for creating a new agent. It calls `query-gpt` with a specific query to generate the agent prompt.

### `gen-agent`

This function creates a new agent with a unique ID and a body generated by `gen-agent-body`. It can be called with or without an argument and returns a map representing the agent.

### `gen-agents`

This function generates multiple agents by calling `gen-agent` with the bodies generated by `gen-agent-bodies`.

### `gen-agent-bodies`

This function generates the bodies for the agents by calling `gen-agent-body` a specified number of times.

### `mutate-agent`

This function takes an agent and a task description, calls `query-gpt` with a modified prompt to improve the agent, and generates a new agent with the updated body.

### `summarize`

This function takes a task description, a verse, and an agent, and generates a summary by calling `query-gpt` with a modified prompt.

### `get-verse` and `get-next-verse-ref`

These functions retrieve Bible verses from the "bible-api.com" API. `get-verse` takes a reference to a verse and returns the corresponding verse content. `get-next-verse-ref` takes a reference to a verse and returns the reference to the next verse.

### `battle`

This function takes a verse, two summaries, and prompts the user to choose the most insightful and interesting summary. It calls `query-gpt` to generate the prompt.

### Main Logic

The main logic of the app is in a loop that iterates through multiple challenges. It selects two random agents, retrieves a verse, generates summaries using the agents, prompts the user to choose the better summary, mutates the winning agent, and updates the list of agents. The loop continues until a certain number of challenges or until an error occurs.

This is just a summary of the code file and does not include all the details of each function.